os: linux
dist: bionic
language: python

env:
  global:
    - PYTHONPATH="$PYTHONPATH:$TRAVIS_BUILD_DIR/clowder:$TRAVIS_BUILD_DIR/clowder_test:$TRAVIS_BUILD_DIR/test"

jobs:
  include:
  - os: osx
    language: c
    env:
      - TARGET="llvm"
      - PATH="/usr/local/bin:$PATH"
    script: echo 'PASS' # clowder-test -c llvm all
  # - env: TARGET="cats"
  #   python: 3.6
  #   script: clowder-test -c cats all
  # - env: TARGET="cats"
  #   python: 3.7
  #   script: clowder-test -c cats all
  # - env: TARGET="parallel"
  #   python: 3.7
  #   script: clowder-test -c parallel
  # - env: TARGET="swift"
  #   script: clowder-test -c swift all

addons:
  homebrew:
    packages:
    - python3
    - github-release
    update: true

install: script/travis/install

before_script: script/travis/before_script

after_script: script/travis/after_script

after_success: if [ "$TRAVIS_OS_NAME" = "osx" ]; then script/deploy; fi

branches:
  only: # whitelist
    - master

notifications:
  email: false
  slack:
    secure: G5UcsKT8xMjddtTSUPXECI3uobS5/sRn87iC+fMilbpnDK3yAGoKkyCfPK4E/kJSEPZ8hBKz3uHNzpb0DdOSsjbAItiI+RQ3Glgs86B1sg2pqB2uwVPDCyPn8XHnpYPkKxFYlG19/JG9SEDej4N3kjnB4FVBm7n38ZFWjZh7s2fOjlpPKiHz8pe3B8XYfXTyQGIr9Q2I1eHbQJOEzs4PO1j/uKC1jgwe7nZnOE3sYsfcabScEHTz4Z7s9xhRXcwvorhQYQtBS7id9Gg5E4ANhoVVs7QifazDE1EK3vWjvoFYgYKnCbXzQunB09XlymrWTJZx80JOmgALU0UPUEI8Wvt/kXQP9oxqsMEeoP7UbZvXTfmeOVlm+5f5oesp/JQeBvaPj5qnbWVzcMGqi/hev4qwNv01jQOWrzVmZazw+HgeQcuaHKprK7KLdPFQR5c6CJJtwIxwdRGLmHVTtKIVQo45mEEnjHpYOmbkmmN2VETdgRlkV8t0WdCQpXXVH7uniwa7cYzb9shpiq0o+G3uHN1eUIuia/0XIVgWRL0baN6JitEBvc032M/3UrJESStQFpMF/Nw+NXm38xp7sQWReZM1ZVIBNIR1XPnaZxuLzBhKKCYcByYz7PEF71o/SkWHhAa3EKPO+9q4zceTbWunjRlp1ycUIMyhqDlCpHM8c2Y=
  webhooks: https://clowder-repo.herokuapp.com/coverage
